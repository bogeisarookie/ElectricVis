//变电站出发线路
var line_1 = [{
    name: '变电站出发线路',
    coor: [
        [31.8571109687, 117.3032569885],
        [31.8584140784, 117.3027741909]
    ],
    value: 20,
}, {
    name: "变电站右侧线路",
    coor: [
        [31.8584140784, 117.3027741909],
        [31.8602365785, 117.3087716103]
    ],
    value: 60,
},{
    name:"Baohe District 1#st 2#line",
    coor:[
        [31.8602365785, 117.3087716103],
        [31.8578399834,117.3098230362],
        [31.8539670269,117.3117166758],
        [31.8526210248,117.3138977410]
    ],
    value:90
},{
    name:"变电站右侧上方路线",
    coor:[
        [31.8602365785, 117.3087716103],
        [31.8651844847,117.3065614700],
        [31.8700865680,117.3047482967],
        [31.8743506218,117.2988367081],
        [31.8757785294,117.3006773917]
    ],
    value:40,
},{
    name:"变电站右侧中部左路线",
    coor:[
        [31.862446311603858, 117.30777338013338],
        [31.86241441892595, 117.30756820254578],
        [31.8617218894848, 117.30464960968919],
        [31.86301582185145, 117.30434916630689],
        [31.862961149020368, 117.30224606263086],
        [31.863799462200532, 117.3023104433556],
        [31.863854134534435, 117.30336213137576],
        [31.863562548378965, 117.30364111451641],
        [31.863544324213628, 117.30426346152264],

    ],
    value:50,
},{
    name:"变电站右侧中部偏上左路线",
    coor:[
    [31.865202708505514, 117.30649613988658],
    [31.864327960069833,117.30407029108406],
    [31.863999927266278, 117.30074415662564],
    [31.865184484664415, 117.30093726539683],
    [31.865330275292106, 117.29911327333511],
    [31.86409104760659, 117.2990700959046],
    [31.864182167856825, 117.29773956092585],
    [31.86478355924928, 117.29778292335845]
    ],
    value:60,
    
},{
    name:"变电站右侧中路地铁二号线*(金大塘)",
    coor:[
        [31.864327960069833,117.30407029108406],
        [31.867571777164457, 117.30284794635111],
        [31.866806392410165, 117.3021176095181],
        [31.869084304534873, 117.3012377396128]
    ],
    value:30,
},{
    name:"地铁一号线马鞍山路八岔路口左",
    coor:[
        [31.862286848104024, 117.29990776220976],
        [31.86223217484056, 117.29507890979255],
        [31.860427938956267, 117.29527246822155],
        [31.860318590192033, 117.29385609227646],
        [31.859534920252905, 117.28692430062947]
    ],
    value:70,
},{
    name:"三牌楼二号线",
    coor:[
        [31.86223217484056, 117.29507890979255],
        [31.86157609315005, 117.28709626263482],
    ],
    value:75,
},{
    name:'无为路',
    coor:[
        [31.860026992853353, 117.29179650777088],
        [31.858878819366883, 117.29203257042838],
        [31.85776708220711, 117.28902775632336],
        [31.857475476798474, 117.28664566950663]
    ],
    value:63,
},{
    name:"宿州路",
    coor:[
        [31.861758338532447, 117.28896367879645],
        [31.863544324213628, 117.28937142338675],
        [31.863362082362055, 117.29029423176154],
        [31.863252737078167, 117.29113118118362],
        [31.863307409736333, 117.29280497467943]

    ],
    value:55,
},
    {
    name:"变电站左岔路",
    coor:[
        [31.8584140784,117.3027741909],
        [31.8579402225,117.3013794422],
    ],
    value:60,
},{
    name:"变电站左岔路上方路线",
    coor:[
        [31.8579402225,117.3013794422],
        [31.8602456909,117.2999846935],
        [31.8623324091,117.2999417782],
        [31.8639817032,117.3008108139],
        // [31.8656765271,117.3013472557],
        // [31.8751523877,117.3090720177],
        // [31.8771863391,117.3070147826],
        // [31.88025,117.30423],
        // [31.8844245330,117.3073902919]
    ],
    value:60,
},
// },{
//     name:'变电站左岔路上方路线小区左岔路',
//     coor:[
//         [31.8844245330,117.3073902919],
//         [31.8847707130,117.3067411973]
//     ],
//     value:70,
// },{
//     name:'变电站左岔路上方路线小区左岔路左路',
//     coor:[
//         [31.8847707130,117.3067411973],
//         [31.8849665775,117.3064622476],
//         [31.8854187847,117.3068626689]
//     ],
//     value:20, 
// },{
//     name:'变电站左岔路上方路线小区左岔路左路右小分叉点',
//     coor:[
//         [31.8854187847,117.3068626689],
//         [31.8852456961,117.3071362542],
//     ],
//     value:20, 
// },{
//     name:"包河万达左岔路上方路线小区左岔路左路上小路线",
//     coor:[
//         [31.8854187847,117.3068626689],
//         [31.8870084520,117.3080642986],
//         [31.8871314338,117.3079087304],
//         [31.8873773967,117.3080964851]
//     ],
//     value:60
// },
// {
//     name:"包河万达左岔路上方路线小区左岔路环路",
//     coor:[
//         [31.8847707130,117.3067411973],
//         [31.8852456961,117.3071362542],
//         [31.8849255826,117.3077282502]
//     ],
//     value:40, 
// },{
//     name:"包河万达左岔路上方路线小区上方路线",
//     coor:[
//         [31.8844245330,117.3073902919],
//         [31.8867533783,117.3092766570],
//         [31.8858879444,117.3109181689]
//     ],
//     value:30, 
// },
// {
//     name:"包河万达左岔路上方路线小区右岔路",
//     coor:[
//         [31.8844245330,117.3073902919],
//         [31.8842719831,117.3076558113]
//     ],
//     value:60, 
// },{
//     name:"包河万达左岔路上方路线右岔路上方路线",
//     coor:[
//         [31.8842719831,117.3076558113],
//         [31.8864891941,117.3093732166],
//         [31.8855690983,117.3110147285]
//     ],
//     value:80,
// },{
//     name:"包河万达左岔路上方路线右岔路上方路线下侧分叉点",
//     coor:[
//         [31.8855690983,117.3110147285],
//         [31.8845384081,117.3101958825]
//     ],
//     value:90,
// },{
//     name:"包河万达左岔路上方路线右岔路上方路线右侧分叉点",
//     coor:[
//         [31.8855690983,117.3110147285],
//         [31.8849893524,117.3119983270]
//     ],
//     value:70, 
// },{
//     name:"包河万达左岔路上方路线右岔路右方路线",
//     coor:[
//         [31.8842719831,117.3076558113],
//         [31.8834178705,117.3093536689]
//     ],
//     value:20, 
// },{
//     name:"包河万达左岔路上方路线右岔路右方路线上侧分叉点",
//     coor:[
//         [31.8834178705,117.3093536689],
//         [31.8845611832,117.3102012469],
//         [31.8855372136,117.3085524606]
//     ],
//     value:30, 
// },{
//     name:"包河万达左岔路上方路线右岔路右方路线右侧分叉点",
//     coor:[
//         [31.8834178705,117.3093536689],
//         [31.8833313243,117.3105284764],
//     ],
//     value:40, }
{
    name:"包河万达左岔路下方路线",
    coor:[
        [31.8579402225,117.3013794422],
        [31.8570790742,117.3016798496],
        [31.8551198180, 117.3010414839],
        [31.8483805702,117.3006176949],
        [31.8484174139,117.3012111647],
    ],
    value:70
},{
    name:"包河万达左岔路左方路线",
    coor:[
        [31.8579402225,117.3013794422],
        [31.8528775489,117.2861344167]
    ],
    value:30,
},{
    name:'包河万达左岔路左方路线中路下方路线',
    coor:[
        [31.85521550361151, 117.29374934607473],
        [31.850950564611043, 117.29557160117244],
        [31.8478884354848, 117.295700362622]
    ],
    value:60
},{
    name:'中下方左路',
    coor:[
        [31.850950564611043, 117.29557160117244],
        [31.850494897072647, 117.29113080347105]
    ],
    value:70,
},
{
    name:'中下方右路',
    coor:[
        [31.850950564611043, 117.29557160117244],
        [31.851023471208237, 117.29634533384124],
        [31.851497362685286, 117.29636679408281],
        [31.851552042314413, 117.29799777244386],
        [31.85105992448523, 117.29819093517395],
        [31.851260417251165,  117.29911380007717],
        [31.851552042314413, 117.29913526031875],
        [31.851661401475393, 117.299543004909],

    ],
    value:80,
},{
    name:'中下方右路分叉1',
    coor:[
        [31.85116928422978, 117.29846990289782],
        [31.852244648143785, 117.29825530048191],
        [31.852590949107864, 117.2993712330447]
    ],
    value:75,
},{
    name:'中下方右路分叉2',
    coor:[
        [31.8512968704345, 117.2986630399332],
        [31.85189834587932, 117.29840551703411]
    ],
    value:80,
}
]

function drawLine() {
    for (let i = 0; i < line_1.length; i++) {
        let polyline = L.polyline(line_1[i].coor, {
            color: (function (element) {
                return getColorByBaiFenBi(element.value);
            })(line_1[i])
        }).bindPopup(
            "<div class='userpopup'><span class='label label-primary'>Name</span>"+ line_1[i].name +"</div>" +
            "<div class='userpopup'><span class='label label-primary'>Current size</span> 6.7A</div>" +
            "<div class='userpopup'><span class='label label-primary'>Capcity</span>9.5A</div>"
        ).addTo(map);
        if(line_1[i].name=="Baohe District 1#st 2#line"){
            polyline.on('click',drawLineUser);
        }
    }
}

function getColorByBaiFenBi(bili) {
    //var 百分之一 = (单色值范围) / 50;  单颜色的变化范围只在50%之内  
    var one = (255 + 255) / 100;
    var r = 0;
    var g = 0;
    var b = 0;

    if (bili < 50) {
        // 比例小于50的时候红色是越来越多的,直到红色为255时(红+绿)变为黄色.  
        r = one * bili;
        g = 255;
    }
    if (bili >= 50) {
        // 比例大于50的时候绿色是越来越少的,直到0 变为纯红  
        g = 255 - ((bili - 50) * one);
        r = 255;
    }
    r = parseInt(r);// 取整  
    g = parseInt(g);// 取整  
    b = parseInt(b);// 取整  

    //console.log("#"+r.toString(16,2)+g.toString(16,2)+b.toString(16,2));  
    //return "#"+r.toString(16,2)+g.toString(16,2)+b.toString(16,2);  
    //console.log("rgb("+r+","+g+","+b+")" );  
    return "rgb(" + r + "," + g + "," + b + ")";

}
//  console.log( calcuColor(80));
// drawLine()